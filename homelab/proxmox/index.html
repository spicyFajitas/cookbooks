
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="https://spicyfajitas.github.io/cookbooks/homelab/proxmox/" rel="canonical"/>
<link href="../networkmap/" rel="prev"/>
<link href="../router/" rel="next"/>
<link href="../../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.6.1, mkdocs-material-9.7.0" name="generator"/>
<title>Proxmox - Spicy Docs</title>
<link href="../../assets/stylesheets/main.618322db.min.css" rel="stylesheet"/>
<link href="../../assets/stylesheets/palette.ab4e12ef.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../../css/extra.css" rel="stylesheet"/>
<script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#proxmox">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header md-header--shadow" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="Spicy Docs" class="md-header__button md-logo" data-md-component="logo" href="../.." title="Spicy Docs">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            Spicy Docs
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              Proxmox
            
          </span>
</div>
</div>
</div>
<form class="md-header__option" data-md-component="palette">
<input aria-label="Switch to dark mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: light)" data-md-color-primary="indigo" data-md-color-scheme="default" id="__palette_0" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_1" hidden="" title="Switch to dark mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"></path></svg>
</label>
<input aria-label="Switch to light mode" class="md-option" data-md-color-accent="indigo" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-primary="indigo" data-md-color-scheme="slate" id="__palette_1" name="__palette" type="radio"/>
<label class="md-header__button md-icon" for="__palette_0" hidden="" title="Switch to light mode">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"></path></svg>
</label>
</form>
<script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="" tabindex="0">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list" role="presentation"></ol>
</div>
</div>
</div>
</div>
</div>
<div class="md-header__source">
<a class="md-source" data-md-component="source" href="https://github.com/spicyFajitas/cookbooks/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="Spicy Docs" class="md-nav__button md-logo" data-md-component="logo" href="../.." title="Spicy Docs">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"></path></svg>
</a>
    Spicy Docs
  </label>
<div class="md-nav__source">
<a class="md-source" data-md-component="source" href="https://github.com/spicyFajitas/cookbooks/" title="Go to repository">
<div class="md-source__icon md-icon">
<svg viewbox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
</div>
<div class="md-source__repository">
    GitHub
  </div>
</a>
</div>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../..">
<span class="md-ellipsis">
    
  
    Intro
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../current%20readme%20boilerplate/">
<span class="md-ellipsis">
    
  
    Cookbooks Readme Boilerplate
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../markdown%20syntax/">
<span class="md-ellipsis">
    
  
    Markdown Syntax
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../spicydocs%20page%20boilerplate/">
<span class="md-ellipsis">
    
  
    SpicyDocs Pages Boilerplate
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_5" type="checkbox"/>
<label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
<span class="md-ellipsis">
    
  
    3D printing
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_5_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_5">
<span class="md-nav__icon md-icon"></span>
            
  
    3D printing
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../3D%20printing/">
<span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_6" type="checkbox"/>
<label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Blog
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_6_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_6">
<span class="md-nav__icon md-icon"></span>
            
  
    Blog
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../blog/">
<span class="md-ellipsis">
    
  
    Public Blogs
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../blog/2023-11-08/">
<span class="md-ellipsis">
    
  
    2023-11-08 State of the Homelab (working document)
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../blog/2024-01-16/">
<span class="md-ellipsis">
    
  
    2024-01-16 Minecraft Server Rabbit Hole
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../blog/2024-04-01/">
<span class="md-ellipsis">
    
  
    2024-04-01 No Minecraft for the Guest Network
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_7" type="checkbox"/>
<label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Hobbies
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_7_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_7">
<span class="md-nav__icon md-icon"></span>
            
  
    Hobbies
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../hobbies/magic/">
<span class="md-ellipsis">
    
  
    Magic
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../hobbies/track-days/">
<span class="md-ellipsis">
    
  
    Motorcycle Track Days
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--active md-nav__item--nested">
<input checked="" class="md-nav__toggle md-toggle" id="__nav_8" type="checkbox"/>
<label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Homelab
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="true" aria-labelledby="__nav_8_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_8">
<span class="md-nav__icon md-icon"></span>
            
  
    Homelab
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../bash/">
<span class="md-ellipsis">
    
  
    Bash
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../commands/">
<span class="md-ellipsis">
    
  
    Commands
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../docker/">
<span class="md-ellipsis">
    
  
    Docker
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../fail2ban/">
<span class="md-ellipsis">
    
  
    Fail2Ban
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../fedora/">
<span class="md-ellipsis">
    
  
    Fedora Linux
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../grafana/">
<span class="md-ellipsis">
    
  
    Grafana / Prometheus
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../hardware%20inventory/">
<span class="md-ellipsis">
    
  
    Hardware Inventory
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../ip-addresses/">
<span class="md-ellipsis">
    
  
    IP Addresses
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../linux%20administration/">
<span class="md-ellipsis">
    
  
    Linux Administration
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../netdata/">
<span class="md-ellipsis">
    
  
    Netdata
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../networkmap/">
<span class="md-ellipsis">
    
  
    Network Map
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
<span class="md-ellipsis">
    
  
    Proxmox
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
<span class="md-ellipsis">
    
  
    Proxmox
  

    
  </span>
</a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#known-issues">
<span class="md-ellipsis">
      
        Known Issues
      
    </span>
</a>
<nav aria-label="Known Issues" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#attached-devices-changing-device-number">
<span class="md-ellipsis">
      
        Attached Devices Changing Device Number
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setup-tasks">
<span class="md-ellipsis">
      
        Setup Tasks
      
    </span>
</a>
<nav aria-label="Setup Tasks" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#configure-updates">
<span class="md-ellipsis">
      
        Configure Updates
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#turn-off-no-subscription-notice">
<span class="md-ellipsis">
      
        Turn off No-Subscription Notice
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#storage">
<span class="md-ellipsis">
      
        Storage
      
    </span>
</a>
<nav aria-label="Storage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#local-storage">
<span class="md-ellipsis">
      
        Local Storage
      
    </span>
</a>
<nav aria-label="Local Storage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#smart">
<span class="md-ellipsis">
      
        SMART
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#networked-storage">
<span class="md-ellipsis">
      
        Networked Storage
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#schedule-backups">
<span class="md-ellipsis">
      
        Schedule Backups
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#schedule-snapshots">
<span class="md-ellipsis">
      
        Schedule Snapshots
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pci-passthrough-iommu">
<span class="md-ellipsis">
      
        PCI Passthrough / IOMMU
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vlan-aware">
<span class="md-ellipsis">
      
        VLAN Aware
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#windows-virtio-drivers">
<span class="md-ellipsis">
      
        Windows VirtIO Drivers
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cloud-init-ubuntu-template">
<span class="md-ellipsis">
      
        Cloud Init Ubuntu Template
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-tasks">
<span class="md-ellipsis">
      
        Common Tasks
      
    </span>
</a>
<nav aria-label="Common Tasks" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#growing-disks-vms">
<span class="md-ellipsis">
      
        Growing Disks (VMs)
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#email-alerts">
<span class="md-ellipsis">
      
        Email Alerts
      
    </span>
</a>
<nav aria-label="Email Alerts" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#tldr-alert-config">
<span class="md-ellipsis">
      
        TLDR: Alert Config
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#alert-config-explained">
<span class="md-ellipsis">
      
        Alert Config Explained
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../router/">
<span class="md-ellipsis">
    
  
    Router
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../syncthing/">
<span class="md-ellipsis">
    
  
    Syncthing
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../tools/">
<span class="md-ellipsis">
    
  
    Tools
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../truenas/">
<span class="md-ellipsis">
    
  
    TrueNAS
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../xen%20orchestra/">
<span class="md-ellipsis">
    
  
    XCP-NG
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_8_18" type="checkbox"/>
<label class="md-nav__link" for="__nav_8_18" id="__nav_8_18_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Minecraft
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_8_18_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_8_18">
<span class="md-nav__icon md-icon"></span>
            
  
    Minecraft
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../minecraft/forge-mod-loader/">
<span class="md-ellipsis">
    
  
    Linux MC with Forge Mods
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../minecraft/minecraft/">
<span class="md-ellipsis">
    
  
    Minecraft Server on Linux VM
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../minecraft/paper/">
<span class="md-ellipsis">
    
  
    Linux MC Running on Paper
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../minecraft/spigot/">
<span class="md-ellipsis">
    
  
    Linux MC running on Spigot
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_9" type="checkbox"/>
<label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Parents
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_9_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_9">
<span class="md-nav__icon md-icon"></span>
            
  
    Parents
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../parents/dads-desktop/">
<span class="md-ellipsis">
    
  
    Dad's Desktop
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../parents/dads-phone/">
<span class="md-ellipsis">
    
  
    Dad's Phone
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../parents/home%20access%20points/">
<span class="md-ellipsis">
    
  
    Home Access Points
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../parents/moms-laptop/">
<span class="md-ellipsis">
    
  
    Mom's Laptop
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_10" type="checkbox"/>
<label class="md-nav__link" for="__nav_10" id="__nav_10_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_10_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_10">
<span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/gimp/">
<span class="md-ellipsis">
    
  
    GIMP
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/git/">
<span class="md-ellipsis">
    
  
    Git
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/linux%20desktop/">
<span class="md-ellipsis">
    
  
    Linux Desktop
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../reference/windows/">
<span class="md-ellipsis">
    
  
    Windows
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_11" type="checkbox"/>
<label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
<span class="md-ellipsis">
    
  
    School
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_11_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_11">
<span class="md-nav__icon md-icon"></span>
            
  
    School
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../school/shell_lug/">
<span class="md-ellipsis">
    
  
    Linux Users Group Shell
  

    
  </span>
</a>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_11_2" type="checkbox"/>
<label class="md-nav__link" for="__nav_11_2" id="__nav_11_2_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Sat4411
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_11_2_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_11_2">
<span class="md-nav__icon md-icon"></span>
            
  
    Sat4411
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_11_2_1" type="checkbox"/>
<label class="md-nav__link" for="__nav_11_2_1" id="__nav_11_2_1_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Lab05
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_11_2_1_label" class="md-nav" data-md-level="3">
<label class="md-nav__title" for="__nav_11_2_1">
<span class="md-nav__icon md-icon"></span>
            
  
    Lab05
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../school/sat4411/lab05/readme/">
<span class="md-ellipsis">
    
  
    Lab 5 - Terraform and VM Automation
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_11_3" type="checkbox"/>
<label class="md-nav__link" for="__nav_11_3" id="__nav_11_3_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Sat4812
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_11_3_label" class="md-nav" data-md-level="2">
<label class="md-nav__title" for="__nav_11_3">
<span class="md-nav__icon md-icon"></span>
            
  
    Sat4812
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../school/sat4812/lab07/">
<span class="md-ellipsis">
    
  
    Lab7
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../school/sat4812/lab08/">
<span class="md-ellipsis">
    
  
    Lab8
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../school/sat4812/lab09/">
<span class="md-ellipsis">
    
  
    Lab9
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../school/sat4812/lab10/">
<span class="md-ellipsis">
    
  
    Lab 10
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../school/sat4812/lab11/">
<span class="md-ellipsis">
    
  
    Lab 11
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../school/sat4812/lab12/">
<span class="md-ellipsis">
    
  
    Lengthy Logs: Attack Analysis
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_12" type="checkbox"/>
<label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Setups
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_12_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_12">
<span class="md-nav__icon md-icon"></span>
            
  
    Setups
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../setups/google_chrome/">
<span class="md-ellipsis">
    
  
    Google Chrome
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setups/uyouplus%20youtube/">
<span class="md-ellipsis">
    
  
    uYouPlus
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setups/vscode/">
<span class="md-ellipsis">
    
  
    VSCode
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setups/windows/">
<span class="md-ellipsis">
    
  
    Windows
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../setups/wsl%20cowsay/">
<span class="md-ellipsis">
    
  
    WSL Cowsay
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item md-nav__item--nested">
<input class="md-nav__toggle md-toggle" id="__nav_13" type="checkbox"/>
<label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
<span class="md-ellipsis">
    
  
    Vehicles
  

    
  </span>
<span class="md-nav__icon md-icon"></span>
</label>
<nav aria-expanded="false" aria-labelledby="__nav_13_label" class="md-nav" data-md-level="1">
<label class="md-nav__title" for="__nav_13">
<span class="md-nav__icon md-icon"></span>
            
  
    Vehicles
  

          </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="../../vehicles/buell-blast-500/">
<span class="md-ellipsis">
    
  
    Buell Blast
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../vehicles/honda/">
<span class="md-ellipsis">
    
  
    Honda
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../vehicles/kawasaki-ninja-300/">
<span class="md-ellipsis">
    
  
    Ninja 300
  

    
  </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../../vehicles/tires/">
<span class="md-ellipsis">
    
  
    Tires
  

    
  </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#known-issues">
<span class="md-ellipsis">
      
        Known Issues
      
    </span>
</a>
<nav aria-label="Known Issues" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#attached-devices-changing-device-number">
<span class="md-ellipsis">
      
        Attached Devices Changing Device Number
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#setup-tasks">
<span class="md-ellipsis">
      
        Setup Tasks
      
    </span>
</a>
<nav aria-label="Setup Tasks" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#configure-updates">
<span class="md-ellipsis">
      
        Configure Updates
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#turn-off-no-subscription-notice">
<span class="md-ellipsis">
      
        Turn off No-Subscription Notice
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#storage">
<span class="md-ellipsis">
      
        Storage
      
    </span>
</a>
<nav aria-label="Storage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#local-storage">
<span class="md-ellipsis">
      
        Local Storage
      
    </span>
</a>
<nav aria-label="Local Storage" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#smart">
<span class="md-ellipsis">
      
        SMART
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#networked-storage">
<span class="md-ellipsis">
      
        Networked Storage
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#schedule-backups">
<span class="md-ellipsis">
      
        Schedule Backups
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#schedule-snapshots">
<span class="md-ellipsis">
      
        Schedule Snapshots
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#pci-passthrough-iommu">
<span class="md-ellipsis">
      
        PCI Passthrough / IOMMU
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#vlan-aware">
<span class="md-ellipsis">
      
        VLAN Aware
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#windows-virtio-drivers">
<span class="md-ellipsis">
      
        Windows VirtIO Drivers
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#cloud-init-ubuntu-template">
<span class="md-ellipsis">
      
        Cloud Init Ubuntu Template
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#common-tasks">
<span class="md-ellipsis">
      
        Common Tasks
      
    </span>
</a>
<nav aria-label="Common Tasks" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#growing-disks-vms">
<span class="md-ellipsis">
      
        Growing Disks (VMs)
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#email-alerts">
<span class="md-ellipsis">
      
        Email Alerts
      
    </span>
</a>
<nav aria-label="Email Alerts" class="md-nav">
<ul class="md-nav__list">
<li class="md-nav__item">
<a class="md-nav__link" href="#tldr-alert-config">
<span class="md-ellipsis">
      
        TLDR: Alert Config
      
    </span>
</a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#alert-config-explained">
<span class="md-ellipsis">
      
        Alert Config Explained
      
    </span>
</a>
</li>
</ul>
</nav>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="proxmox">Proxmox<a class="headerlink" href="#proxmox" title="Permanent link">¶</a></h1>
<h2 id="known-issues">Known Issues<a class="headerlink" href="#known-issues" title="Permanent link">¶</a></h2>
<h3 id="attached-devices-changing-device-number">Attached Devices Changing Device Number<a class="headerlink" href="#attached-devices-changing-device-number" title="Permanent link">¶</a></h3>
<p>I had added a PCIe 4 port gigabit network adapter to my primary Proxmox host because I didn't want to store it loosely in my tech tote. I removed it as I have plans to add a PCIe bifurcation card to run disks in mirrored mode and improve VM performance. However, Proxmox networking was screwed up because <code>/etc/network/interfaces</code> changed with the device rename of the primary ethernet adapter I was using (the one attached to the motherboard).</p>
<p>The fix is running <code>journalctl -b 0 | grep renamed</code> - this will show you the old name of the network adapter and what it was changed to. You just need to edit <code>/etc/network/interfaces</code> and revert the automatic name change if removing devices.</p>
<h2 id="setup-tasks">Setup Tasks<a class="headerlink" href="#setup-tasks" title="Permanent link">¶</a></h2>
<p>Most of these are based on YouTuber Techno Tim's video <a href="https://www.youtube.com/watch?v=GoZaMgEgrHw">Before I do anything on Proxmox, I do this first...</a> but there are some configurations I do outside of the video as well.</p>
<h3 id="configure-updates">Configure Updates<a class="headerlink" href="#configure-updates" title="Permanent link">¶</a></h3>
<p>Edit <code>/etc/apt/sources.list</code></p>
<p>Add line for non-production use <code>deb http://download.proxmox.com/debian buster pve-no-subscription</code></p>
<p>Edit enterprise list</p>
<p>Comment out line in <code>etc/apt/sources.list.d/pve-enterprise.list</code> if this is not being used in company enterprise environment.</p>
<p><code>apt-get update</code></p>
<p><code>apt-get upgrade</code></p>
<p><code>apt dist-upgrade</code></p>
<p>Reboot</p>
<h3 id="turn-off-no-subscription-notice">Turn off No-Subscription Notice<a class="headerlink" href="#turn-off-no-subscription-notice" title="Permanent link">¶</a></h3>
<p>To remove the popup message “You do not have a valid subscription for this server”, follow the instructions below or on <a href="https://github.com/foundObjects/pve-nag-buster/">this GitHub repo</a>. This is also known as the pve-nag-buster.</p>
<p>Installation with wget</p>
<div class="highlight"><pre><span></span><code>wget<span class="w"> </span>https://raw.githubusercontent.com/foundObjects/pve-nag-buster/master/install.sh

<span class="c1"># Always read scripts downloaded from the internet before running them with sudo</span>
sudo<span class="w"> </span>bash<span class="w"> </span>install.sh

<span class="c1"># or ..</span>
chmod<span class="w"> </span>+x<span class="w"> </span>install.sh<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>./install.sh
</code></pre></div>
<p>Installation with git</p>
<div class="highlight"><pre><span></span><code>git<span class="w"> </span>clone<span class="w"> </span>https://github.com/foundObjects/pve-nag-buster.git

<span class="c1"># Always read scripts downloaded from the internet before running them with sudo</span>
<span class="nb">cd</span><span class="w"> </span>pve-nag-buster<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>sudo<span class="w"> </span>./install.sh
</code></pre></div>
<p>Uninstall</p>
<div class="highlight"><pre><span></span><code>sudo ./install.sh --uninstall
# remove /etc/apt/sources.list.d/pve-no-subscription.list if desired
</code></pre></div>
<h3 id="storage">Storage<a class="headerlink" href="#storage" title="Permanent link">¶</a></h3>
<h4 id="local-storage">Local Storage<a class="headerlink" href="#local-storage" title="Permanent link">¶</a></h4>
<p>Navigate via the GUI to Server &gt; Disks &gt; <code>/disk/name</code> for whatever option you want to configure with local disks.</p>
<p>If a local disk fails, you need to remove it by navigating to the disk type, destroying the disk. Navigate to the Disks menu and <code>Initialize Disk with GPT</code>. Then, you can navigate to the storage type and create the storage type you want.</p>
<p>For example, when <code>storageSSD</code> failed, I had to delete the disk in the <code>LVM-Thin</code> menu, Re-Initialize the Disk with GPT, then navigate to LVM-Thin and <code>Create: Thinpool</code> on the unused disk - <code>/dev/sda</code>.</p>
<h5 id="smart">SMART<a class="headerlink" href="#smart" title="Permanent link">¶</a></h5>
<p>SMART is usually enabled by default but if it is not, <code>smartctl -a /dev/sdX</code> Turn on SMART if not enabled</p>
<h4 id="networked-storage">Networked Storage<a class="headerlink" href="#networked-storage" title="Permanent link">¶</a></h4>
<p>Datacenter -&gt; Storage -&gt; Add -&gt;  {{ storage type }}</p>
<p>Configure SMB with the following settings:</p>
<div class="highlight"><pre><span></span><code>ID: spicyNAS-proxmox
Server: 10.100.10.15 (or IP of TrueNAS instance)
Username: proxmox
Password: bitwarden {{ TrueNAS Samba Habanero SMB }}
Share: proxmox
Nodes: All
Enable: Checked
Content: (Select all)
</code></pre></div>
<h3 id="schedule-backups">Schedule Backups<a class="headerlink" href="#schedule-backups" title="Permanent link">¶</a></h3>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><input id="__tabbed_1_2" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">General</label><label for="__tabbed_1_2">Retention</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>The scheduling supports cron format in the "schedule" field.
Datacenter -&gt; Backups -&gt; Add</p>
<div class="highlight"><pre><span></span><code>Node: (pick node/nodes)
Storage: nas device
Schedule: 03:00 (3 AM every morning)
Selection Mode: all
Send email to: enter email
Email: notify always
Compression: ZTSD
Mode: Snapshot (this has always worked for me)
Enable: [x] 
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code>Keep all backups: [ ] unchecked
Keep Last: 8

OR

Keep Hourly: 0
Keep Daily: 5
Keep Weekly: 2
Keep Monthly: 2
Keep Yearly: 0
</code></pre></div>
</div>
</div>
</input></input></div>
<h3 id="schedule-snapshots">Schedule Snapshots<a class="headerlink" href="#schedule-snapshots" title="Permanent link">¶</a></h3>
<p>Don't know where this is yet but it'd be neat to implement scheduled snapshots as well as backups.</p>
<h3 id="pci-passthrough-iommu">PCI Passthrough / IOMMU<a class="headerlink" href="#pci-passthrough-iommu" title="Permanent link">¶</a></h3>
<p>Prerequisites: Motherboard, CPU, and BIOS all need to support. Search the internet and updated docs if/when you need PCI passthrough.</p>
<h3 id="vlan-aware">VLAN Aware<a class="headerlink" href="#vlan-aware" title="Permanent link">¶</a></h3>
<p>PVE Node -&gt; Network -&gt; Select Network Adapter (bridge) -&gt; Enable VLAN Aware</p>
<p>You will probably want to set VLAN on the network adapter next.</p>
<h3 id="windows-virtio-drivers">Windows VirtIO Drivers<a class="headerlink" href="#windows-virtio-drivers" title="Permanent link">¶</a></h3>
<p>Yeah I'll get to this some day. For now the smaller resolution box doesn't bother me enough yet.</p>
<h2 id="cloud-init-ubuntu-template">Cloud Init Ubuntu Template<a class="headerlink" href="#cloud-init-ubuntu-template" title="Permanent link">¶</a></h2>
<p>In order to save time, we'll create a template for our Ubuntu servers.</p>
<p>First, create a VM with the following specific options:</p>
<ul>
<li>OS: do not use any media</li>
<li>System: Qemu Agent checked</li>
<li>Disks: Delete default disk</li>
<li>CPU: can be low, change later</li>
<li>Memory: can be low, chamge later
Other options can be set as desired.</li>
</ul>
<p>Next, enter the Proxmox shell.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Download ubuntu cloud image</span>
wget<span class="w"> </span>https://cloud-images.ubuntu.com/&lt;path<span class="w"> </span>to<span class="w"> </span>specific<span class="w"> </span>cloud<span class="w"> </span>image&gt;

<span class="c1"># Set up console for viewing VM output</span>
qm<span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="m">900</span><span class="w"> </span>--serial0<span class="w"> </span>socket<span class="w"> </span>--vga<span class="w"> </span>serial0

<span class="c1"># Change disk type to .qcow2 in order to increase size</span>
mv<span class="w"> </span>ubuntu-22.04-minimal-cloudimg-amd64.img<span class="w"> </span>ubuntu-22.04-minimal-cloudimg-amd64.qcow2

<span class="c1"># Increase size</span>
qemu-img<span class="w"> </span>resize<span class="w"> </span>ubuntu-22.04-minimal-cloudimg-amd64.qcow2<span class="w"> </span>32G

<span class="c1"># Import disk into VM</span>
<span class="c1"># Note: 900 is VM ID, local-lvm is storage for VM images</span>
qm<span class="w"> </span>importdisk<span class="w"> </span><span class="m">900</span><span class="w"> </span>ubuntu-22.04-minimal-cloudimg-amd64.qcow2<span class="w"> </span>local-lvm
</code></pre></div>
<p>Once done in the shell, go to VM options &gt; Boot order. Enable new disk, and move to 2<sup>nd</sup> priority.</p>
<p>If needed, install the <code>qemu-guest-agent</code> package on the machine.</p>
<p>Be sure when deploying from clones to change the IP address in Cloud Init options to static.</p>
<h2 id="common-tasks">Common Tasks<a class="headerlink" href="#common-tasks" title="Permanent link">¶</a></h2>
<h3 id="growing-disks-vms">Growing Disks (VMs)<a class="headerlink" href="#growing-disks-vms" title="Permanent link">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This documentation is based on the <a href="https://pve.proxmox.com/wiki/Resize_disks#Online_for_Linux_Guests">"Example with EFI" docs</a></p>
</div>
<p>Note: ubuntu says virtual machine disks are <code>vda</code> devices. My ubuntu docker VM had vda1 and vda2, with vda2 being the data partition.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># list system messages about disk size changing</span>
dmesg<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>vda

<span class="c1"># list disks in fdisk</span>
fdisk<span class="w"> </span>-l<span class="w"> </span>/dev/vda<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>^/dev

<span class="c1"># enter the partitioning tool</span>
parted<span class="w"> </span>/dev/vda

<span class="c1"># print partitions in parted</span>
<span class="o">(</span>parted<span class="o">)</span><span class="w"> </span>print

<span class="c1"># resize specific partition with percentage of free space</span>
<span class="c1"># NOTE: be sure to check the partition number on the host. On my docker host,</span>
<span class="c1"># it just so happens to be partition 2.</span>
<span class="o">(</span>parted<span class="o">)</span><span class="w"> </span>resizepart<span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">100</span>%

<span class="c1"># view new partition sizes</span>
<span class="o">(</span>parted<span class="o">)</span><span class="w"> </span>print

<span class="c1"># resize file system to fill disk space</span>
resize2fs<span class="w"> </span>/dev/vda2
</code></pre></div>
<h2 id="email-alerts">Email Alerts<a class="headerlink" href="#email-alerts" title="Permanent link">¶</a></h2>
<p>This section is based on YouTuber Techno Tim's guide <a href="https://technotim.live/posts/proxmox-alerts/">Set up alerts in Proxmox before it's too late!</a></p>
<h3 id="tldr-alert-config">TLDR: Alert Config<a class="headerlink" href="#tldr-alert-config" title="Permanent link">¶</a></h3>
<details class="note" open="open">
<summary>Required Config</summary>
<p>You'll need a Google app password for the Google account you want to use to send emails. Follow <a href="https://support.google.com/accounts/answer/185833?hl=en">Google's guide</a> on how to make <a href="https://myaccount.google.com/apppasswords">app passwords</a>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># commands to be run in proxmox shell</span>
apt<span class="w"> </span>update
apt<span class="w"> </span>install<span class="w"> </span>-y<span class="w"> </span>libsasl2-modules<span class="w"> </span>mailutils

<span class="c1"># configure postfix</span>
<span class="nb">echo</span><span class="w"> </span><span class="s2">"smtp.gmail.com your-email@gmail.com:YourAppPassword"</span><span class="w"> </span>&gt;<span class="w"> </span>/etc/postfix/sasl_passwd
<span class="c1"># update permissions</span>
chmod<span class="w"> </span><span class="m">600</span><span class="w"> </span>/etc/postfix/sasl_passwd
<span class="c1"># hash the file</span>
postmap<span class="w"> </span>hash:/etc/postfix/sasl_passwd
<span class="c1"># ensure hashed db file was created </span>
cat<span class="w"> </span>/etc/postfix/sasl_passwd.db
</code></pre></div>
<p>Edit postfix config <code>vim /etc/postfix/main.cf</code></p>
<div class="highlight"><pre><span></span><code># /etc/postfix/main.cf
# google mail configuration
relayhost = smtp.gmail.com:587
smtp_use_tls = yes
smtp_sasl_auth_enable = yes
smtp_sasl_security_options =
smtp_sasl_password_maps = hash:/etc/postfix/sasl_passwd
smtp_tls_CAfile = /etc/ssl/certs/Entrust_Root_Certification_Authority.pem
smtp_tls_session_cache_database = btree:/var/lib/postfix/smtp_tls_session_cache
smtp_tls_session_cache_timeout = 3600s
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># reload post fix</span>
systemctl<span class="w"> </span>postfix<span class="w"> </span>reload

<span class="nb">echo</span><span class="w"> </span><span class="s2">"This is a test message sent from postfix on my Proxmox Server"</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>mail<span class="w"> </span>-s<span class="w"> </span><span class="s2">"Test Email from Proxmox"</span><span class="w"> </span>your-email@gmail.com
</code></pre></div>
</details>
<details class="note" open="open">
<summary>Optional Config</summary>
<div class="highlight"><pre><span></span><code>apt<span class="w"> </span>update
apt<span class="w"> </span>install<span class="w"> </span>postfix-pcre

vim<span class="w"> </span>/etc/postfix/smtp_header_checks
</code></pre></div>
<p>Add the following text:</p>
<div class="highlight"><pre><span></span><code># /etc/postfix/smtp_header_checks
/^From:.*/ REPLACE From: pve1-alert &lt;pve1-alert@something.com&gt;
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># hash the file</span>
postmap<span class="w"> </span>hash:/etc/postfix/smtp_header_checks
<span class="c1"># check the contents of the file</span>
cat<span class="w"> </span>/etc/postfix/smtp_header_checks.db
</code></pre></div>
<p>Edit postfix config again <code>vim /etc/postfix/main.cf</code>:</p>
<div class="highlight"><pre><span></span><code>smtp_header_checks = pcre:/etc/postfix/smtp_header_checks
</code></pre></div>
<p>Reload postfix <code>systemctl postfix reload</code></p>
</details>
<h3 id="alert-config-explained">Alert Config Explained<a class="headerlink" href="#alert-config-explained" title="Permanent link">¶</a></h3>
<p>Setting up alerts depends on <code>mailutils</code>, <code>libsasl2-modules</code>, and <code>postfix-pcre</code>. According to <a href="https://mailutils.org/">their website</a>, <code>mailutils</code> is "Mailutils is a swiss army knife of electronic mail handling. It offers a rich set of utilities and daemons for processing e-mail." <code>libsasl2-modules</code> provides authentication with Google's servers using the app password, and <code>postfix-pcre</code> allows Perl Compatible Regular Expression for modifying the headers of the emails that are sent. Basically, you're setting up the email server config to reach out to Google's mail servers and authenticate using the app password.</p>
</article>
</div>
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
</div>
</main>
<footer class="md-footer">
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
<script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
<script src="../../javascript/mermaid.min.js"></script>
</body>
</html>